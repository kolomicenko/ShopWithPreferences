<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
 Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="main.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>main.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		Main script that contains all classes, should be included in every page.
 This script creates <a href="BehaviorCookies.html#">BehaviorCookies</a> and <a href="LoginForm.html#">LoginForm</a> automatically
 because this is what every page needs.<BR/><BR/>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="Behavior.html">Behavior</a></b></td>
    <td>Class that captures and sends user behavior to the server by ajax.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="BehaviorCookies.html">BehaviorCookies</a></b></td>
    <td>Class for working with cookies containing user behavior.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="CartControls.html">CartControls</a></b></td>
    <td>Provides shopping cart functionality.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="Comments.html">Comments</a></b></td>
    <td>Class that adds comments functionality.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="LoginForm.html">LoginForm</a></b></td>
    <td>Animated showing/hiding of the login form on top of the page.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="PageNumbers.html">PageNumbers</a></b></td>
    <td>Scrolling of page numbers on the catalog page.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="Rating.html">Rating</a></b></td>
    <td>Product rating functionality.</td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="TabSwitching.html">TabSwitching</a></b></td>
    <td>Class for switching tabs with description, user comments,...</td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

	<a name="method_summary"><!-- --></a>
	<table border="1" cellpadding="3" cellspacing="0" width="100%">
		<tr bgcolor="#CCCCFF" class="TableHeadingColor">
			<td colspan=2>
				<font size="+2">
					<b>Method Summary</b>
				</font>
			</td>
		</tr>
	
		
		   <tr bgcolor="white" class="TableRowColor">
		      <td align="right" valign="top" width="1%">
			 <font size="-1">
			    <code>static&nbsp;void</code>
			 </font>
		      </td>
		      <td>
			 <code>
			    <b>
			       <a href="GLOBALS.html#!s!postData">postData</a></b>(&lt;String&gt; address, &lt;Array&gt; parameters)
			 </code>
			 <br>
			 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 Posts data to server using http POST.
		      </td>
		   </tr>
		
	
	</table>
    <p>

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">// file description for doxygen</span>
<span class="comment">/**
 * <span class="attrib">@file</span>
 * Don't read this page, go to &lt;a href="../js_docs_out/overview-summary-main.js.html"&gt;
 * Main.js documentation&lt;/a&gt; 
 *
 */</span>


<span class="comment">// file description for jsdoc</span>
<span class="comment">/**
 * <span class="attrib">@fileoverview</span>
 * Main script that contains all classes, should be included in every page.
 * This script creates {<span class="attrib">@link</span> BehaviorCookies} and {<span class="attrib">@link</span> LoginForm} automatically
 * because this is what every page needs.
 *
 */</span>



<span class="comment">/**
 * Posts data to server using http POST. Creates and submits a html form to do this.
 * Usual use when a hyperlink doing POST is needed.
 *
 * <span class="attrib">@param</span> {String} address Address to send POST request to
 * <span class="attrib">@param</span> {Array} parameters Array of values indexed by names
 */</span>
<span class="comment">//usage: &lt;a href="javascript:postData('target.php',{'name':'value', 'name2':'value2'});"&gt;</span>
<span class="reserved">function</span> postData(address, parameters) {
  var myForm = document.createElement(<span class="literal">"form"</span>);
  myForm.method = <span class="literal">"post"</span>;
  myForm.action = address;
  <span class="reserved">for</span> (name in parameters) {
    var myInput = document.createElement(<span class="literal">"input"</span>);
    myInput.setAttribute(<span class="literal">"name"</span>, name);
    myInput.setAttribute(<span class="literal">"value"</span>, parameters[name]);
    myForm.appendChild(myInput);
  }
  document.body.appendChild(myForm) ;
  myForm.submit() ;
  document.body.removeChild(myForm) ;
}

<span class="comment">/**
 * <span class="attrib">@class</span>
 * Animated showing/hiding of the login form on top of the page.
 * Login message is hidden on the first click.
 *
 * <span class="attrib">@constructor</span>
 */</span>
<span class="reserved">function</span> LoginForm(){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">/** Div with message to the user about successfull login/logout. */</span>
    <span class="reserved">this</span>.loginMessage = $(<span class="literal">'#loginMessage'</span>);

    <span class="comment">/** Email input field. */</span>
    <span class="reserved">this</span>.loginEmail = $(<span class="literal">'#loginEmail'</span>);

    $(<span class="literal">'#formToggler'</span>).click(<span class="reserved">function</span>(){
        thiss.loginMessage.hide(); <span class="comment">// don't show it again</span>
        $(<span class="literal">'#loginForm'</span>).animate({opacity: <span class="literal">'toggle'</span>}, 200, <span class="reserved">function</span>(){
            thiss.loginEmail.focus(); <span class="comment">// focus the email input field</span>
        });
        
        <span class="reserved">return</span> false;
    });

    $(<span class="literal">'#formSubmit'</span>).click(<span class="reserved">function</span>(){
        $(<span class="literal">'#loginForm'</span>).submit();

        <span class="reserved">return</span> false;
    });    
}


<span class="comment">/**
 * <span class="attrib">@class</span>
 * Class for working with cookies containing user behavior.
 * Behavior is saved to cookies, they are sent and then deleted allways when
 * a page is loading.
 *
 * <span class="attrib">@constructor</span>
 */</span>
<span class="reserved">function</span> BehaviorCookies(){
    var behavior = BehaviorCookies.get();
    <span class="reserved">if</span> (behavior != null){
        Behavior.send(behavior); <span class="comment">// send cookies to the server</span>
        BehaviorCookies.remove(); <span class="comment">// and delete them</span>
    }
}

<span class="comment">/**
 * Sets behavior cookies to specified values. Saves them for one month (when
 * user closes browser or navigates to different domain, cookies are kept and
 * sent when user gets to this application again).
 * 
 */</span>
BehaviorCookies.set = <span class="reserved">function</span>(productID, scrollCount, clickCount, displayTime,
                                displayCount){

    <span class="comment">/// Lifetime of the cookies in days</span>
    var cookieLifeTime = 30;

    $.cookie(<span class="literal">'productID'</span>, productID, {<span class="literal">'expires'</span>: cookieLifeTime});
    $.cookie(<span class="literal">'scrollCount'</span>, scrollCount, {<span class="literal">'expires'</span>: cookieLifeTime});
    $.cookie(<span class="literal">'clickCount'</span>, clickCount, {<span class="literal">'expires'</span>: cookieLifeTime});
    $.cookie(<span class="literal">'displayTime'</span>, displayTime, {<span class="literal">'expires'</span>: cookieLifeTime});
    $.cookie(<span class="literal">'displayCount'</span>, displayCount, {<span class="literal">'expires'</span>: cookieLifeTime});
};

<span class="comment">/**
 * Returns behavior cookies as a json object.
 * <span class="attrib">@return</span> Json object or null if cookies don't exist
 */</span>
BehaviorCookies.get = <span class="reserved">function</span>(){
    var productID = $.cookie(<span class="literal">'productID'</span>);
    <span class="reserved">if</span> (productID != null &amp;&amp; productID != <span class="literal">''</span> &amp;&amp; productID &gt; 0){
        <span class="reserved">return</span> {<span class="literal">"productID"</span> : productID,
                <span class="literal">"scrollCount"</span> : $.cookie(<span class="literal">'scrollCount'</span>),
                <span class="literal">"clickCount"</span> : $.cookie(<span class="literal">'clickCount'</span>),
                <span class="literal">"displayTime"</span> : $.cookie(<span class="literal">'displayTime'</span>),
                <span class="literal">"displayCount"</span> : $.cookie(<span class="literal">'displayCount'</span>)};
    }
    <span class="reserved">return</span> null;
};

<span class="comment">/**
 * Deletes behavior cookies. 
 */</span>
BehaviorCookies.remove = <span class="reserved">function</span>(){
    $.cookie(<span class="literal">'productID'</span>, null);
    $.cookie(<span class="literal">'scrollCount'</span>, null);
    $.cookie(<span class="literal">'clickCount'</span>, null);
    $.cookie(<span class="literal">'displayTime'</span>, null);
    $.cookie(<span class="literal">'displayCount'</span>, null);    
};





<span class="comment">/**
 * <span class="attrib">@class</span>
 * Class for switching tabs with description, user comments,... on the item page.
 * Switches among tabs as user clicks on links with tab names. First tab is
 * selected when the page loads.
 * <span class="attrib">@constructor</span>
 */</span>
<span class="reserved">function</span> TabSwitching (){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">/** Tabs jQuery object */</span>
    <span class="reserved">this</span>.tabs = $(<span class="literal">'.tab'</span>);

    <span class="comment">/** jQuery object with the switches (the links) */</span>
    <span class="reserved">this</span>.switches = $(<span class="literal">'#switches a'</span>); 

    <span class="comment">/** Tab currently visible */</span>
    <span class="reserved">this</span>.currentIndex = 0; 

    <span class="reserved">this</span>.switches.each(<span class="reserved">function</span>(index){
        $(<span class="reserved">this</span>).click(<span class="reserved">function</span>(){
            thiss.switches.eq(thiss.currentIndex).removeClass(<span class="literal">'selected'</span>);
            thiss.tabs.eq(thiss.currentIndex).hide();
            thiss.currentIndex = index;
            thiss.switches.eq(thiss.currentIndex).addClass(<span class="literal">'selected'</span>);
            thiss.tabs.eq(thiss.currentIndex).show();
            <span class="reserved">return</span> false;
        });

    }).first().click(); <span class="comment">// select first tab in the beginning</span>

}

<span class="comment">/**
 * <span class="attrib">@class</span>
 * Product rating functionality. Logged users can also change the rating by
 * clicking on one of the stars. There are five layers of stars on top of each
 * other. The first layer is Empty Stars, stars with grey color. The second one is
 * Full Stars, stars with yellow color that have given width and thus indicate
 * the rating of the product. The third layer is Choose Stars, stars with blue color,
 * which gets to foreground as user moves over the rating div. This one indicates
 * the rating that user is going to choose and changes as user moves the mouse.
 * This is done with the help of the fourth layer, which is transparent and consists
 * of separate divs, each representing one star, which fire the mouse events.
 * Without this helping layer, mouse coords would have to be counted, which is more
 * difficult for the browser. Last layer is the Cover layer which is used after
 * user clicks and sends the rating. It covers all layers underneath until the
 * response from the server is received, so that user can't click and send rating
 * more than once at a time.
 *
 * <span class="attrib">@constructor</span>
 */</span>
<span class="reserved">function</span> Rating(rating, maxRating, productID, userLogged){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">/** ID of current product. */</span>
    <span class="reserved">this</span>.productID = productID;
    <span class="comment">/** Indicates whether the user is logged or not.*/</span>
    <span class="reserved">this</span>.userLogged = userLogged;
    <span class="comment">/** Current rating of the product.*/</span>
    <span class="reserved">this</span>.rating = rating;

    <span class="comment">/** Width of one star image in pixels. */</span>
    <span class="reserved">this</span>.starWidth = 20;

    <span class="comment">/** jQuery object for Full Stars div.*/</span>
    <span class="reserved">this</span>.starsF = $(<span class="literal">'#starsFull'</span>);
    
    <span class="comment">// sets the width of full stars</span>
    <span class="comment">// this way even fractions of stars can be "highlighted"</span>
    <span class="reserved">this</span>.starsF.css(<span class="literal">'width'</span>, Math.round(<span class="reserved">this</span>.starWidth * rating));

    <span class="comment">// set width of empty stars</span>
    $(<span class="literal">'#rating'</span>).css(<span class="literal">'width'</span>, Math.round(<span class="reserved">this</span>.starWidth * maxRating));

    <span class="reserved">if</span> (<span class="reserved">this</span>.userLogged){

        <span class="comment">/** jQuery object for Choose Stars div.*/</span>
        <span class="reserved">this</span>.starsCh = $(<span class="literal">'#starsChoose'</span>);

        <span class="comment">/** jQuery object for the last (helping) layer.*/</span>
        <span class="reserved">this</span>.helpingStars = $(<span class="literal">'#helpingStars'</span>);

        $(<span class="literal">'#rating'</span>).mouseleave(<span class="reserved">function</span>(){ <span class="comment">// when user leaves rating div</span>
            thiss.starsCh.css(<span class="literal">'width'</span>, 0);
            thiss.starsF.show();
        }).find(<span class="literal">'.star'</span>).each(<span class="reserved">function</span>(i){  <span class="comment">// when user moves mouse of the</span>
            $(<span class="reserved">this</span>).mouseenter(<span class="reserved">function</span>(){  <span class="comment">// last layer (helping stars)</span>
                thiss.starsF.hide();
                thiss.starsCh.css(<span class="literal">'width'</span>, (i + 1)* thiss.starWidth);
                <span class="comment">// alter width of Choose Stars (this way no star fractions)</span>
            });
            $(<span class="reserved">this</span>).click(<span class="reserved">function</span>(){ <span class="comment">//when user clicks it, ajax-send the rating</span>
                <span class="comment">//temporarily hide all the layers, so that event are not fired</span>
                $(<span class="literal">'#coverLayer'</span>).show();
                <span class="comment">//thiss.helpingStars.css('width', 0);</span>

                <span class="comment">// hide Choose Stars layer</span>
                thiss.starsCh.css(<span class="literal">'width'</span>, 0);
                <span class="comment">// set the Full Stars layer to new value</span>
                thiss.starsF.css(<span class="literal">'width'</span>, (i + 1)* thiss.starWidth).show();
                <span class="comment">// send rating to the server</span>
                $.post(<span class="literal">"php/ajax/rating.php"</span>,
                {
                    <span class="literal">"productID"</span>: thiss.productID,
                    <span class="literal">"rating"</span>: (i + 1)
                },
                <span class="reserved">function</span>(){
                    <span class="comment">// now user can send other ratings again</span>
                    $(<span class="literal">'#coverLayer'</span>).hide();
                    <span class="comment">//thiss.helpingStars.css('width', 100);</span>
                }
                );
            });
        });
    }<span class="reserved">else</span>{
        $(<span class="literal">'#rating'</span>).click(<span class="reserved">function</span>(){ <span class="comment">// guest users cannot rate products</span>
            alert(<span class="literal">"Please sign in to rate products."</span>);
        });

    }

}

<span class="comment">/**
 * <span class="attrib">@class</span>
 * Class that captures and sends user behavior to the server by ajax. Click count,
 * display time and amount of scrolling are observed. OnUnload event is fired
 * when user leaves current page, which is the time to send information about
 * user's behavior on that page. However, there are some issues with this event:
 *&lt;p&gt;
 *Opera doesn't fire onUnload when navigating to the same server (i.e. history
 *navigation or page refreshing). There are two ways how to solve this.
 *Either send behavior using ajax every certain amount of time (but make sure
 *that displayCount is incremented just once - that's why displayCount is allways
 *sent to the server as part of the behavior), or save behavior to cookies
 *{<span class="attrib">@link</span> BehaviorCookies} and then ajax-send it just once when next page loads.
 *Cookies are much better, this approach causes no extra requests to the server.
 *&lt;p&gt;
 *There is a third option (for Opera), to switch off fast history navigation by
 *history.navigationMode = 'compatible' (http://www.opera.com/support/kb/view/827/).
 *But using this as well as using other ways discussed in the article didn't
 *really do anything (at least on my computer).
 *&lt;p&gt;
 *There is even a fourth solution that also doesn't work too well. DisplayCount
 *can be counted even by the server. Then, if displayCount counted by javascript
 *is smaller, it means onUnload wasn't fired a couple of times. Missing
 *values can be counted from the difference, but this can't be generally
 *precise and in worst case the page could be loaded from cache, which could
 *cause the server's display count to be smaller (and it does happen).
 *&lt;p&gt;
 *The cookies solution works like this:
 *Behavior is saved from cookies to database at the time of next page request.
 *(which definitely is the very next request, because user stayed at the same
 *server - otherwise unload would've been fired, behavior sent using ajax
 * and cookies deleted)
 *&lt;p&gt;
 *PHP cannot be used to read the cookies, because next page request (with
 *the cookies) is sent BEFORE onUnload is fired. That means, if the browser
 *fired onUnload and next page wasn't got from cache, behavior would be saved
 *into database TWICE. That's why dealing with cookies can be done only with
 *javascript when the next page is being loaded. This also solves afore-
 *mentioned cache problem.
 *&lt;p&gt;
 *There is one more problem. With webkit (chrome, safari) ajax request never
 *reach server when run in onUnload event AND user stays at the same domain.
 *Don't know if this is an intended behavior or a bug, either way, server must
 *deal with cookies at this situation because they are already deleted on the
 *client side at the time of next page load. In case the page is fetched
 *from cache (at this webkit situation), there is NO solution other than
 *setting {<span class="attrib">@link</span> Behavior#SEND_INFO_OFTEN} to true or, as a last resort, changing
 *cache control. Someone may think that the problem could be solved by not
 *deleting the cookies before ajax returns a reply from a server, which
 *actually would work for webkit, but not for firefox, because it doesn't
 *wait for an ajax reply during page unload (which makes sense after all), so
 *that cookies wouldn't be deleted and behavior saved twice.
 *&lt;p&gt;
 *There are even more issues with browsers. Such as whenever a window has
 *been ctrl-tabbed or alt-tabbed out and back, firefox doesn't fire onunload
 *upon tab closing (ctrl-w), which must be a bug. Opera doesn't fire onUnload
 *when it should much more often (upon tab closing, browser closing, ...)
 *&lt;p&gt;
 *As a consequence, {<span class="attrib">@link</span> Behavior#SEND_INFO_OFTEN} is used for Opera implicitly.
 *IE and Firefox should not make any problems. And Chrome and Safari are
 *also OK, with the use of cookies.
 *&lt;p&gt;
 *EDIT: as onUnload makes so many problems, it's been decided to use only cookies
 *to send the info. Their lifetime should be longer than just one session. That
 *way no behavior will be lost, in worst case just uploaded later (when user
 *opens the pages again). I resorted to this after all the issues with Opera or
 *Chrome and after realizing that ratings recounting (which may take a bit longer)
 *is done after sending the behavior and IE waits for whole operation to complete.
 *And Firefox waits too, when re-refreshing again.
 *
 * <span class="attrib">@constructor</span>
 */</span>

<span class="reserved">function</span> Behavior(productID){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">/** Whether to ajax-send behavior info in certain interval
     * {<span class="attrib">@link</span> Behavior#INFO_INTERVAL}.*/</span>
    <span class="reserved">this</span>.SEND_INFO_OFTEN = false || $.browser.opera;

    <span class="comment">//EDIT: set even opera no to use this (use cookies instead)</span>
    <span class="reserved">this</span>.SEND_INFO_OFTEN = false;

    <span class="comment">/** How often to send the info by ajax (in miliseconds). */</span>
    <span class="reserved">this</span>.INFO_INTERVAL = 5000;

    <span class="comment">/** Whether behavior has been sent from this page.
     *  Used not to increment display count when behavior info is not sent
     *  for the first time, so that this only makes sense when SEND_INFO_OFTEN
     *  is set to true. */</span>
    <span class="reserved">this</span>.infoBeenSent = false;

    <span class="comment">/** Whether to save behavior to cookies.
     *  At least on of SEND_INFO_OFTEN or USE_BEHAVIOR_COOKIES should be used,
     *  USE_BEHAVIOR_COOKIES is recommended.
     */</span>
    <span class="reserved">this</span>.USE_BEHAVIOR_COOKIES = true;

    <span class="comment">/**
     * Whether to send info when onUnload event is fired.
     */</span>
    <span class="reserved">this</span>.USE_ONUNLOAD = false;

    <span class="comment">/** How often to save behavior cookies (in miliseconds). */</span>
    <span class="reserved">this</span>.COOKIES_INTERVAL = 100;

    <span class="comment">/** Pointer to cookies saving interval function. */</span>
    <span class="reserved">this</span>.cookiesTimer = null;

    <span class="comment">/** 
     *  Maximum time user is expected to view the page. No bigger values are
     *  sent to the server as behavior.
     */</span>
    <span class="reserved">this</span>.MAX_DISPLAY_TIME = 1000 * 60 * 5; <span class="comment">// five minutes</span>

    <span class="comment">/** ID of current product. */</span>
    <span class="reserved">this</span>.productID = productID;

    <span class="comment">/** Total amount of pixels user scrolled by. */</span>
    <span class="reserved">this</span>.scrollCount = 0;

    <span class="comment">/** Last position of content in the window.
     * Used to count amount of scrolling. */</span>
    <span class="reserved">this</span>.lastScrollTop = 0;

    <span class="comment">/** Number of mouse clicks user does. */</span>
    <span class="reserved">this</span>.clickCount = 0;

    <span class="comment">/** Last time page was focused. */</span>
    <span class="reserved">this</span>.timeFocused = new Date().valueOf();

    <span class="comment">/** Total time the page has been focused. */</span>
    <span class="reserved">this</span>.displayTime = 0;

    <span class="comment">/** Whether the window is focused right now. */</span>
    <span class="reserved">this</span>.focused = true;

    <span class="comment">/** Whether the page is saved to bookmarks. This is not used now, there
     *  is no way to find this out using javascript. */</span>
    <span class="reserved">this</span>.bookmarked = false;

    <span class="comment">/** Total amount of pixels user moved mouse by. Not used now, because
     *  mouse moving is not too relevant behavior. But maybe this would be able to
     *  tell whether user really sits in front of PC and reads the page.
     *  */</span>
    <span class="reserved">this</span>.mouseMove = 0;

    <span class="comment">// when user scrolls the page</span>
    $(window).scroll(<span class="reserved">function</span>(){
        <span class="comment">//thiss.scrollCount ++; // not precise (browsers don't fire the event as often)</span>
        <span class="comment">// it is better to count pixels</span>
        var currentScrollTop = $(window).scrollTop();
        thiss.scrollCount += Math.abs(currentScrollTop - thiss.lastScrollTop);
        thiss.lastScrollTop = currentScrollTop;
    });

    <span class="comment">// record all click to links (tab switches, images, ...)</span>
    $(<span class="literal">'#main a'</span>).click(<span class="reserved">function</span>(){
        thiss.clickCount ++;
    });

    <span class="comment">// if window is blurred (user goes to another tab or leaves the browser),</span>
    <span class="comment">// stop counting time</span>
    $(window).blur(<span class="reserved">function</span>(){
        <span class="reserved">if</span> (!thiss.focused)
            <span class="reserved">return</span>;
        thiss.focused = false;
        thiss.displayTime += new Date().valueOf() - thiss.timeFocused;
    });

    <span class="comment">// when focused, start counting time again</span>
    $(window).focus(<span class="reserved">function</span>(){
        <span class="reserved">if</span> (thiss.focused)
            <span class="reserved">return</span>;
        thiss.focused = true;
        thiss.timeFocused = new Date().valueOf();
    });

    <span class="comment">// send info about behavior to server when user is leaving the page</span>
    <span class="reserved">if</span> (<span class="reserved">this</span>.USE_ONUNLOAD){
        <span class="comment">//set onUnload cookie for server to know that onUnload has been used</span>
        $.cookie(<span class="literal">'onUnload'</span>, 1);

        $(window).unload(<span class="reserved">function</span>(){
            <span class="comment">// disable cookies timer first</span>
            <span class="reserved">if</span> (thiss.USE_BEHAVIOR_COOKIES){
                clearInterval(thiss.cookiesTimer);
            }
            <span class="comment">// send the behavior</span>
            thiss.sendInfo();
        });
    }

    
    <span class="comment">// send info directly to server every certain amount of time</span>
    <span class="reserved">if</span> (<span class="reserved">this</span>.SEND_INFO_OFTEN){
        window.setInterval(<span class="reserved">function</span>() {
            thiss.sendInfo();
            }, <span class="reserved">this</span>.INFO_INTERVAL);
    }
    
    <span class="comment">// save behavior cookies every certain amount of time</span>
    <span class="reserved">if</span> (<span class="reserved">this</span>.USE_BEHAVIOR_COOKIES){
        <span class="reserved">this</span>.cookiesTimer = window.setInterval(<span class="reserved">function</span>() {
            thiss.setBehaviorCookies();
            }, <span class="reserved">this</span>.COOKIES_INTERVAL);

        $(window).unload(<span class="reserved">function</span>(){
            thiss.setBehaviorCookies();
        });

    }
}

<span class="comment">/** Counts {<span class="attrib">@link</span> Behavior#displayTime} from {<span class="attrib">@link</span> Behavior#focused}
 *and {<span class="attrib">@link</span> Behavior#timeFocused}. Maximum display time restriction is applied. */</span>
Behavior.<span class="reserved">prototype</span>.countDisplayTime = <span class="reserved">function</span>(){
    <span class="comment">// if window is focused, displayTime has increased since last call</span>
    <span class="reserved">if</span> (<span class="reserved">this</span>.focused){
        var time = new Date().valueOf();
        <span class="reserved">this</span>.displayTime += time - <span class="reserved">this</span>.timeFocused;
        <span class="reserved">this</span>.timeFocused = time;
    }

    <span class="comment">// check if maximum display time was reached</span>
    <span class="reserved">if</span> (<span class="reserved">this</span>.displayTime &gt; <span class="reserved">this</span>.MAX_DISPLAY_TIME){
        <span class="reserved">this</span>.displayTime = <span class="reserved">this</span>.MAX_DISPLAY_TIME;
    }
}

<span class="comment">/**
 * Sends behavior info to the server. Also removes behavior cookies as they are
 * not needed when the behavior has already been sent.
 */</span>
Behavior.<span class="reserved">prototype</span>.sendInfo = <span class="reserved">function</span> (){
    var thiss = <span class="reserved">this</span>; <span class="comment">// jquery changes scope of 'this'</span>

    <span class="reserved">this</span>.countDisplayTime();

    <span class="comment">// if there's nothing to send, return</span>
    <span class="comment">// makes more sense when SEND_INFO_OFTEN</span>
    <span class="reserved">if</span> (<span class="reserved">this</span>.displayTime == 0 &amp;&amp; <span class="reserved">this</span>.scrollCount == 0 &amp;&amp; <span class="reserved">this</span>.clickCount == 0)
        <span class="reserved">return</span>;

    <span class="comment">//if info has been sent using ajax (thanks to SEND_INFO_OFTEN),</span>
    <span class="comment">//don't increment displayCount again</span>
    var displayCount = <span class="reserved">this</span>.infoBeenSent ? 0 : 1;
    <span class="reserved">this</span>.infoBeenSent = true;

    <span class="comment">// send all the info to the server    </span>
    Behavior.send(
        {
            <span class="literal">"productID"</span>: thiss.productID,
            <span class="literal">"scrollCount"</span>: thiss.scrollCount,
            <span class="literal">"clickCount"</span>: thiss.clickCount,
            <span class="literal">"displayTime"</span>: thiss.displayTime,
            <span class="literal">"displayCount"</span>: displayCount
        }
    );

    <span class="comment">// remove cookies now</span>
    <span class="comment">// if this is during onUnload, timer has been disabled already</span>
        
    BehaviorCookies.remove(); <span class="comment">// nothing happens if they don't exist    </span>

    <span class="comment">/*alert("scrollCount " + thiss.scrollCount +
            "\n clickCount " + thiss.clickCount +
            "\n displayTime " + thiss.displayTime);*/</span>

    <span class="comment">// reset all values (make sense only if SEND_INFO_OFTEN</span>
    <span class="reserved">this</span>.displayTime = 0;
    <span class="reserved">this</span>.scrollCount = 0;
    <span class="reserved">this</span>.clickCount = 0;
}

<span class="comment">/**
 * Saves behavior into cookies. Call this using the {<span class="attrib">@link</span> Behavior#cookiesTimer}.
 *
 **/</span>
Behavior.<span class="reserved">prototype</span>.setBehaviorCookies = <span class="reserved">function</span>(){
    <span class="reserved">this</span>.countDisplayTime();
    var displayCount = <span class="reserved">this</span>.infoBeenSent ? 0 : 1; <span class="comment">//if info has been sent</span>
    <span class="comment">//using ajax (thanks to SEND_INFO_OFTEN), don't increment displayCount again</span>

    BehaviorCookies.set(<span class="reserved">this</span>.productID, <span class="reserved">this</span>.scrollCount, <span class="reserved">this</span>.clickCount, 
                        <span class="reserved">this</span>.displayTime, displayCount);

}

<span class="comment">/** Sends behavior to the server (using ajax)
 *
 * <span class="attrib">@param</span> {json object} behavior Behavior values that will be sent.
 */</span>
Behavior.send = <span class="reserved">function</span>(behavior){
    $.post(<span class="literal">"php/ajax/behavior.php"</span>, behavior);
}


<span class="comment">/**<span class="attrib">@class</span>
 * Class that adds comments functionality.
 * Ajax is used to post comments, so that page doesn't have to refreshed. When
 * server returns the comment details (formated text, time, ...) the comment
 * is added as a new element to the page and the page is scrolled to that element.
 * <span class="attrib">@constructor</span>
 */</span>

<span class="reserved">function</span> Comments(productID){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">/// Maximum length of the comment, in chars.</span>
    <span class="reserved">this</span>.MAX_TEXT_LENGTH = 512;

    <span class="comment">/** ID of current product. */</span>
    <span class="reserved">this</span>.productID = productID;

    <span class="comment">/** Button that sends the comment to the server.*/</span>
    <span class="reserved">this</span>.button = $(<span class="literal">'#addComment'</span>);

    <span class="comment">/** jQuery object of the textarea with comment text. */</span>
    <span class="reserved">this</span>.text = $(<span class="literal">'#commentText'</span>);

    <span class="comment">// enabling/disabling the Add comment button and limiting length of the text</span>
    <span class="reserved">function</span> textareaHandler(text){
        <span class="reserved">if</span> (text.value.length &gt; thiss.MAX_TEXT_LENGTH){
            text.value = text.value.substring(0, thiss.MAX_TEXT_LENGTH);
        }

        thiss.button[0].disabled = text.value == <span class="literal">""</span>;
    }
    
    <span class="reserved">this</span>.text.keyup(<span class="reserved">function</span>(){        
        textareaHandler(<span class="reserved">this</span>);
    });
    <span class="reserved">this</span>.text.change(<span class="reserved">function</span>(){
        textareaHandler(<span class="reserved">this</span>);
    });

    <span class="comment">//send comment using ajax, add it to the page and scroll so that user can see it</span>
    <span class="reserved">this</span>.button.click(<span class="reserved">function</span>(){
        <span class="reserved">this</span>.disabled = true;
        $.post(<span class="literal">"php/ajax/addComment.php"</span>,
        {
            <span class="literal">"productID"</span>: thiss.productID,
            <span class="literal">"text"</span>: thiss.text.val()
        }
        , <span class="reserved">function</span>(data){
            $(<span class="literal">'#commentForm'</span>).parent().prepend(data).each(<span class="reserved">function</span>(){
                    <span class="comment">// count new comment's offset</span>
                    var newOffset = $(<span class="reserved">this</span>).offset().top - 100;
                    
                    <span class="comment">/* ScrollObject is an object that will be scrolled.
                     * Some browsers need 'html' to be scrolled, others need
                     * 'body'. No browser minds if both elements are used, except
                     * for Opera, which would scroll "twice".
                     */</span>
                    var scrollObject = $.browser.opera ? $(<span class="literal">'html'</span>) : $(<span class="literal">'html, body'</span>);

                    scrollObject.animate({scrollTop: newOffset}, 500); <span class="comment">// use animation</span>
            });
            thiss.text.val(<span class="literal">""</span>); <span class="comment">// clear the textarea</span>
        });

    });


}

<span class="comment">/**
 * <span class="attrib">@class</span>
 * Scrolling of page numbers on the catalog page.
 * Sometimes regular javascript functions and properties are used, sometimes
 * those of jQuery, depending on what is easier.
 * <span class="attrib">@constructor</span>
 */</span>
<span class="reserved">function</span> PageNumbers (formPosition){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">/** jQuery object of the whole form div.*/</span>
    <span class="reserved">this</span>.form = $(<span class="literal">'#controlsForm'</span> + formPosition);

    <span class="comment">/** Div with the page numbers. */</span>
    <span class="reserved">this</span>.pageNumbers = <span class="reserved">this</span>.form.find(<span class="literal">'.pageNumbers'</span>);

    <span class="comment">/** Scroll left button. */</span>
    <span class="reserved">this</span>.toLeft = <span class="reserved">this</span>.form.find(<span class="literal">'.toLeft'</span>);

    <span class="comment">/** Scroll right button. */</span>
    <span class="reserved">this</span>.toRight = <span class="reserved">this</span>.form.find(<span class="literal">'.toRight'</span>);

    <span class="comment">/** Scroll to the beginning button. */</span>
    <span class="reserved">this</span>.toBeginning = <span class="reserved">this</span>.form.find(<span class="literal">'.toBeginning'</span>);

    <span class="comment">/** Scroll to the end button. */</span>
    <span class="reserved">this</span>.toEnd = <span class="reserved">this</span>.form.find(<span class="literal">'.toEnd'</span>);

    <span class="comment">/** Scroll left/right step in pixels.  */</span>
    <span class="reserved">this</span>.scrollStep = 70;

    <span class="comment">/** How far in pixels the number of current page should be. */</span>
    <span class="reserved">this</span>.currentPageNoOffset = 60;

    <span class="comment">// scroll page numbers so that currentPageNoOffset is satisfied</span>
    <span class="reserved">this</span>.pageNumbers.scrollLeft(<span class="reserved">this</span>.form.find(<span class="literal">'.currentPageNo'</span>).offset().left
        - <span class="reserved">this</span>.pageNumbers.offset().left - <span class="reserved">this</span>.currentPageNoOffset);

    <span class="comment">// assign events to the buttons</span>
    <span class="reserved">this</span>.toLeft.click(<span class="reserved">function</span>(){
        thiss.scroll(-1, false);        
    });
    <span class="reserved">this</span>.toRight.click(<span class="reserved">function</span>(){
        thiss.scroll(1, false);
    });
    <span class="reserved">this</span>.toBeginning.click(<span class="reserved">function</span>(){
        thiss.scroll(-1, true);
    });
    <span class="reserved">this</span>.toEnd.click(<span class="reserved">function</span>(){
        thiss.scroll(1, true);
    });

    <span class="comment">// hide/show some of the buttons</span>
    <span class="reserved">this</span>.checkBorders();
}


<span class="comment">/**
 * Scroll numbers in a specified direction
 *
 * <span class="attrib">@param</span> {integer} direction -1 for scrolling to the left, +1 to the right
 * <span class="attrib">@param</span> {bool} allTheWay whether to scroll all the way to the end/beginning
 *
 */</span>
PageNumbers.<span class="reserved">prototype</span>.scroll = <span class="reserved">function</span> (direction, allTheWay){
    var thiss = <span class="reserved">this</span>;
    
    <span class="reserved">if</span> (allTheWay)
        <span class="reserved">if</span> (direction &lt; 0)            
            <span class="reserved">this</span>.pageNumbers.animate({scrollLeft: 0}, 1000, <span class="reserved">function</span>(){
                thiss.checkBorders();
            });
        <span class="reserved">else</span>            
            <span class="reserved">this</span>.pageNumbers.animate({scrollLeft: <span class="reserved">this</span>.pageNumbers[0].scrollWidth},
                                     1000, <span class="reserved">function</span>(){
                thiss.checkBorders();
            });
            <span class="comment">// the [0] (or get(0)) returns DOM node from the jQuery object</span>
    <span class="reserved">else</span>{        
        <span class="reserved">this</span>.pageNumbers.animate({scrollLeft: <span class="literal">'+='</span> + (<span class="reserved">this</span>.scrollStep * direction)},
                                 300, <span class="reserved">function</span>(){
                thiss.checkBorders();
            });
    }    
};

<span class="comment">/**
 * Checks whether to hide or show buttons for scrolling.
 * The visibility css property instead of display css property is toggled.
 * There could also be a checkFutureBorders function which will hide/show buttons
 * before animation and not after.
 *
 */</span>
PageNumbers.<span class="reserved">prototype</span>.checkBorders = <span class="reserved">function</span>(){
    <span class="reserved">if</span> (<span class="reserved">this</span>.pageNumbers.scrollLeft() == 0){
        <span class="reserved">this</span>.toLeft.css(<span class="literal">'visibility'</span>, <span class="literal">'hidden'</span>);
        <span class="reserved">this</span>.toBeginning.css(<span class="literal">'visibility'</span>, <span class="literal">'hidden'</span>);
    }<span class="reserved">else</span>{
        <span class="reserved">this</span>.toLeft.css(<span class="literal">'visibility'</span>, <span class="literal">'visible'</span>);
        <span class="reserved">this</span>.toBeginning.css(<span class="literal">'visibility'</span>, <span class="literal">'visible'</span>);
    }
    <span class="reserved">if</span> (<span class="reserved">this</span>.pageNumbers[0].clientWidth &gt;= <span class="reserved">this</span>.pageNumbers[0].scrollWidth ||
            <span class="reserved">this</span>.pageNumbers[0].scrollWidth == <span class="reserved">this</span>.pageNumbers.scrollLeft() + <span class="reserved">this</span>.pageNumbers[0].clientWidth){
        <span class="reserved">this</span>.toRight.css(<span class="literal">'visibility'</span>, <span class="literal">'hidden'</span>);
        <span class="reserved">this</span>.toEnd.css(<span class="literal">'visibility'</span>, <span class="literal">'hidden'</span>);
    }<span class="reserved">else</span>{
        <span class="reserved">this</span>.toRight.css(<span class="literal">'visibility'</span>, <span class="literal">'visible'</span>);
        <span class="reserved">this</span>.toEnd.css(<span class="literal">'visibility'</span>, <span class="literal">'visible'</span>);
    }
};

<span class="comment">/**
 * <span class="attrib">@class</span>
 * Provides shopping cart functionality. Ajax is used to send all changes of the
 * cart (item removal, item quantity change, order preference change) to the server.
 * Also changes cart table after that (recounts prices, changes quantities, ...)
 *
 * <span class="attrib">@constructor</span>
 */</span>
<span class="reserved">function</span> CartControls(){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">/** The 'Continue Order' or 'Submit Order' button. */</span>
    <span class="reserved">this</span>.rightButton = $(<span class="literal">'#main .button.fright'</span>);

    <span class="comment">/** The loading image. */</span>
    <span class="reserved">this</span>.loading = $(<span class="literal">'#loadingGif'</span>);

    <span class="comment">// for tds to have fixed height and for animation of their hiding</span>
    $(<span class="literal">'table.cart td'</span>).wrapInner(<span class="literal">"&lt;div /&gt;"</span>);

    <span class="comment">// user changes quantity of an item</span>
    $(<span class="literal">'input.quantity'</span>).change(<span class="reserved">function</span>(){
        thiss.sendChange(<span class="reserved">this</span>, <span class="reserved">this</span>.value);
    });

    <span class="comment">// when user clicks 'Continue Order', just show order preferences</span>
    $(<span class="literal">'#submitButton'</span>).click(<span class="reserved">function</span>(){
        <span class="comment">// change buttons caption to 'Submit order'</span>
        $(<span class="reserved">this</span>).html(<span class="literal">'Submit order'</span>).click(<span class="reserved">function</span>(){
            <span class="comment">// change the button's click event handler</span>
            <span class="comment">// now the button really submits the order</span>
            postData(<span class="literal">'checkOut.php'</span>,{<span class="literal">'checkOut'</span>:<span class="literal">'yes'</span>});
        });
        $(<span class="literal">'#orderPrefs'</span>).slideDown(300);

        <span class="reserved">return</span> false;
    });

    <span class="comment">// user changes order preference, ajax-send it to the server</span>
    $(<span class="literal">'#orderPrefs input:radio'</span>).change(<span class="reserved">function</span>(){        
        thiss.startLoading();
        $.post(<span class="literal">'php/ajax/changePrefType.php'</span>,
            {
                <span class="literal">"name"</span>: <span class="reserved">this</span>.name,
                <span class="literal">"value"</span>: <span class="reserved">this</span>.value
            },
            <span class="reserved">function</span>(){
                thiss.stopLoading();
            }
        );
    });

    <span class="comment">// user removes an item from the cart</span>
    $(<span class="literal">'a.removeItemButton'</span>).click(<span class="reserved">function</span>(){
        thiss.sendChange(<span class="reserved">this</span>, 0);
        <span class="reserved">return</span> false;
    });

    <span class="comment">// change the radio button event when user clicks to whole table row</span>
    $(<span class="literal">'table.prefTypeTable tr'</span>).click(<span class="reserved">function</span>(){
        var radio = $(<span class="reserved">this</span>).find(<span class="literal">'input:radio'</span>).get(0);
        <span class="reserved">if</span> (radio.checked == false){
            radio.checked = true;
            $(radio).change(); <span class="comment">// don't forget to fire the event</span>
        }
        
    });
}

<span class="comment">/**
 * Sends item's quantity change to the server and changes the cart table
 * appropriately.
 *
 * <span class="attrib">@param</span> {Object} button Button that fired the event (removal or quantity change)
 * <span class="attrib">@param</span> {int} quantity Desired quantity of the item (removal = 0)
 *
 */</span>
CartControls.<span class="reserved">prototype</span>.sendChange = <span class="reserved">function</span>(button, quantity){
    var thiss = <span class="reserved">this</span>;

    <span class="comment">// for user not to be able to submit the order now</span>
    <span class="reserved">this</span>.startLoading();

    <span class="comment">// table row the button is in</span>
    var tr = $(button).parents(<span class="literal">'tr'</span>).first();

    $.post(<span class="literal">'php/ajax/changeCart.php'</span>,
        {
            <span class="literal">"id"</span>: button.name,
            <span class="literal">"quantity"</span>: quantity
        },
        <span class="reserved">function</span>(data){
            thiss.stopLoading();
            
            <span class="reserved">if</span> (data == null){ <span class="comment">// something bad has happened</span>
                window.location.reload(); <span class="comment">// reload the page to "reset" javascript</span>
                <span class="reserved">return</span>;
            }
            <span class="reserved">if</span> (data.quantity == 0){ <span class="comment">// item has been removed</span>
                <span class="comment">// change the count in title of the page</span>
                $(<span class="literal">'#titleItemCount'</span>).html(data.itemCount);
                <span class="reserved">if</span> (data.itemCount == 0){ <span class="comment">// nothing left in the cart</span>
                   <span class="comment">// remove everything</span>
                   thiss.rightButton.remove();
                   $(<span class="literal">'table.cart, #orderPrefs'</span>).remove();
                   <span class="comment">//display message 'nothing in cart';</span>
                   $(<span class="literal">'div.cartInfo'</span>).removeClass(<span class="literal">'noDisplay'</span>);
                   <span class="reserved">return</span>;
                }
                <span class="comment">//something left in the cart, just hide the removed item</span>
                
                <span class="comment">//use div inner wrappers to do this, because td or tr don't</span>
                <span class="comment">//have the height css property</span>
                tr.children(<span class="literal">'td'</span>).children(<span class="literal">'div'</span>).each(<span class="reserved">function</span>(){
                    $(<span class="reserved">this</span>).slideUp(300, <span class="reserved">function</span>(){
                        tr.remove(); <span class="comment">// remove the row when completed</span>
                    });
                });
            }<span class="reserved">else</span>{ <span class="comment">// just quantity changed, set the item prices and quantity</span>
                tr.find(<span class="literal">'input'</span>).val(data.quantity);
                tr.find(<span class="literal">'td.price div'</span>).html(data.price + <span class="literal">',-'</span>);
                tr.find(<span class="literal">'td.VATPrice div'</span>).html(data.VATPrice + <span class="literal">',-'</span>);
            }
            <span class="comment">// set total prices</span>
            <span class="comment">// in case the cart is empty and the cart table deleted, nothing happens</span>
            $(<span class="literal">'#totalPrice'</span>).html(data.totalPrice + <span class="literal">',-'</span>);
            $(<span class="literal">'#totalVATPrice'</span>).html(data.totalVATPrice + <span class="literal">',-'</span>);            
        },
        <span class="literal">"json"</span>
    );
};

<span class="comment">/** Displays the loading image and hides the Submit button. */</span>
CartControls.<span class="reserved">prototype</span>.startLoading = <span class="reserved">function</span>(){
    <span class="reserved">this</span>.rightButton.hide();
    <span class="reserved">this</span>.loading.show();
};

<span class="comment">/** Displays the Submit button and hides the loading image. */</span>
CartControls.<span class="reserved">prototype</span>.stopLoading = <span class="reserved">function</span>(){
    <span class="reserved">this</span>.loading.hide();
    <span class="reserved">this</span>.rightButton.show();
};


<span class="comment">// do this on every page</span>
$(document).ready(<span class="reserved">function</span>(){

    <span class="comment">// check if there is still some behavior saved in cookies    </span>
    new BehaviorCookies();


    <span class="comment">//toggling the form for logging in</span>
    new LoginForm();



});
</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b></b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">

</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Tue Aug  3 14:22:39 2010</div>
</body>
</html>
